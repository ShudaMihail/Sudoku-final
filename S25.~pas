unit S25;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ExtCtrls;

type
  TForm5 = class(TForm)
    GroupBox1: TGroupBox;
    Panel1: TPanel;
    GroupBox2: TGroupBox;
    Button1: TButton;
    Button2: TButton;
    Button3: TButton;
    Button4: TButton;
    Button5: TButton;
    GroupBox3: TGroupBox;
    ComboBox1: TComboBox;
    GroupBox4: TGroupBox;
    Label1: TLabel;
    ListBox1: TListBox;
    OpenDialog1: TOpenDialog;
    SaveDialog1: TSaveDialog;
    Timer1: TTimer;
    E1_1: TEdit;
    E1_2: TEdit;
    E1_3: TEdit;
    E1_4: TEdit;
    E1_5: TEdit;
    E2_1: TEdit;
    E2_2: TEdit;
    E2_3: TEdit;
    E2_4: TEdit;
    E2_5: TEdit;
    E3_1: TEdit;
    E3_2: TEdit;
    E3_3: TEdit;
    E3_4: TEdit;
    E3_5: TEdit;
    E4_1: TEdit;
    E4_2: TEdit;
    E4_3: TEdit;
    E4_4: TEdit;
    E4_5: TEdit;
    E5_1: TEdit;
    E5_2: TEdit;
    E5_3: TEdit;
    E5_4: TEdit;
    E5_5: TEdit;
    Panel2: TPanel;
    E1_6: TEdit;
    E1_7: TEdit;
    E1_8: TEdit;
    E1_9: TEdit;
    E1_10: TEdit;
    E2_6: TEdit;
    E2_7: TEdit;
    E2_8: TEdit;
    E2_9: TEdit;
    E2_10: TEdit;
    E3_6: TEdit;
    E3_7: TEdit;
    E3_8: TEdit;
    E3_9: TEdit;
    E3_10: TEdit;
    E4_6: TEdit;
    E4_7: TEdit;
    E4_8: TEdit;
    E4_9: TEdit;
    E4_10: TEdit;
    E5_6: TEdit;
    E5_7: TEdit;
    E5_8: TEdit;
    E5_9: TEdit;
    E5_10: TEdit;
    Panel3: TPanel;
    E1_11: TEdit;
    E1_12: TEdit;
    E1_13: TEdit;
    E1_14: TEdit;
    E1_15: TEdit;
    E2_11: TEdit;
    E2_12: TEdit;
    E2_13: TEdit;
    E2_14: TEdit;
    E2_15: TEdit;
    E3_11: TEdit;
    E3_12: TEdit;
    E3_13: TEdit;
    E3_14: TEdit;
    E3_15: TEdit;
    E4_11: TEdit;
    E4_12: TEdit;
    E4_13: TEdit;
    E4_14: TEdit;
    E4_15: TEdit;
    E5_11: TEdit;
    E5_12: TEdit;
    E5_13: TEdit;
    E5_14: TEdit;
    E5_15: TEdit;
    Panel4: TPanel;
    E1_16: TEdit;
    E1_17: TEdit;
    E1_18: TEdit;
    E1_19: TEdit;
    E1_20: TEdit;
    E2_16: TEdit;
    E2_17: TEdit;
    E2_18: TEdit;
    E2_19: TEdit;
    E2_20: TEdit;
    E3_16: TEdit;
    E3_17: TEdit;
    E3_18: TEdit;
    E3_19: TEdit;
    E3_20: TEdit;
    E4_16: TEdit;
    E4_17: TEdit;
    E4_18: TEdit;
    E4_19: TEdit;
    E4_20: TEdit;
    E5_16: TEdit;
    E5_17: TEdit;
    E5_18: TEdit;
    E5_19: TEdit;
    E5_20: TEdit;
    Panel5: TPanel;
    E1_21: TEdit;
    E1_22: TEdit;
    E1_23: TEdit;
    E1_24: TEdit;
    E1_25: TEdit;
    E2_21: TEdit;
    E2_22: TEdit;
    E2_23: TEdit;
    E2_24: TEdit;
    E2_25: TEdit;
    E3_21: TEdit;
    E3_22: TEdit;
    E3_23: TEdit;
    E3_24: TEdit;
    E3_25: TEdit;
    E4_21: TEdit;
    E4_22: TEdit;
    E4_23: TEdit;
    E4_24: TEdit;
    E4_25: TEdit;
    E5_21: TEdit;
    E5_22: TEdit;
    E5_23: TEdit;
    E5_24: TEdit;
    E5_25: TEdit;
    Panel6: TPanel;
    E6_1: TEdit;
    E6_2: TEdit;
    E6_3: TEdit;
    E6_4: TEdit;
    E6_5: TEdit;
    E7_1: TEdit;
    E7_2: TEdit;
    E7_3: TEdit;
    E7_4: TEdit;
    E7_5: TEdit;
    E8_1: TEdit;
    E8_2: TEdit;
    E8_3: TEdit;
    E8_4: TEdit;
    E8_5: TEdit;
    E9_1: TEdit;
    E9_2: TEdit;
    E9_3: TEdit;
    E9_4: TEdit;
    E9_5: TEdit;
    E10_1: TEdit;
    E10_2: TEdit;
    E10_3: TEdit;
    E10_4: TEdit;
    E10_5: TEdit;
    Panel7: TPanel;
    E6_6: TEdit;
    E6_7: TEdit;
    E6_8: TEdit;
    E6_9: TEdit;
    E6_10: TEdit;
    E7_6: TEdit;
    E7_7: TEdit;
    E7_8: TEdit;
    E7_9: TEdit;
    E7_10: TEdit;
    E8_6: TEdit;
    E8_7: TEdit;
    E8_8: TEdit;
    E8_9: TEdit;
    E8_10: TEdit;
    E9_6: TEdit;
    E9_7: TEdit;
    E9_8: TEdit;
    E9_9: TEdit;
    E9_10: TEdit;
    E10_6: TEdit;
    E10_7: TEdit;
    E10_8: TEdit;
    E10_9: TEdit;
    E10_10: TEdit;
    Panel8: TPanel;
    E6_11: TEdit;
    E6_12: TEdit;
    E6_13: TEdit;
    E6_14: TEdit;
    E6_15: TEdit;
    E7_11: TEdit;
    E7_12: TEdit;
    E7_13: TEdit;
    E7_14: TEdit;
    E7_15: TEdit;
    E8_11: TEdit;
    E8_12: TEdit;
    E8_13: TEdit;
    E8_14: TEdit;
    E8_15: TEdit;
    E9_11: TEdit;
    E9_12: TEdit;
    E9_13: TEdit;
    E9_14: TEdit;
    E9_15: TEdit;
    E10_11: TEdit;
    E10_12: TEdit;
    E10_13: TEdit;
    E10_14: TEdit;
    E10_15: TEdit;
    Panel9: TPanel;
    E6_16: TEdit;
    E6_17: TEdit;
    E6_18: TEdit;
    E6_19: TEdit;
    E6_20: TEdit;
    E7_16: TEdit;
    E7_17: TEdit;
    E7_18: TEdit;
    E7_19: TEdit;
    E7_20: TEdit;
    E8_16: TEdit;
    E8_17: TEdit;
    E8_18: TEdit;
    E8_19: TEdit;
    E8_20: TEdit;
    E9_16: TEdit;
    E9_17: TEdit;
    E9_18: TEdit;
    E9_19: TEdit;
    E9_20: TEdit;
    E10_16: TEdit;
    E10_17: TEdit;
    E10_18: TEdit;
    E10_19: TEdit;
    E10_20: TEdit;
    Panel10: TPanel;
    E6_21: TEdit;
    E6_22: TEdit;
    E6_23: TEdit;
    E6_24: TEdit;
    E6_25: TEdit;
    E7_21: TEdit;
    E7_22: TEdit;
    E7_23: TEdit;
    E7_24: TEdit;
    E7_25: TEdit;
    E8_21: TEdit;
    E8_22: TEdit;
    E8_23: TEdit;
    E8_24: TEdit;
    E8_25: TEdit;
    E9_21: TEdit;
    E9_22: TEdit;
    E9_23: TEdit;
    E9_24: TEdit;
    E9_25: TEdit;
    E10_21: TEdit;
    E10_22: TEdit;
    E10_23: TEdit;
    E10_24: TEdit;
    E10_25: TEdit;
    Panel11: TPanel;
    E11_1: TEdit;
    E11_2: TEdit;
    E11_3: TEdit;
    E11_4: TEdit;
    E11_5: TEdit;
    E12_1: TEdit;
    E12_2: TEdit;
    E12_3: TEdit;
    E12_4: TEdit;
    E12_5: TEdit;
    E13_1: TEdit;
    E13_2: TEdit;
    E13_3: TEdit;
    E13_4: TEdit;
    E13_5: TEdit;
    E14_1: TEdit;
    E14_2: TEdit;
    E14_3: TEdit;
    E14_4: TEdit;
    E14_5: TEdit;
    E15_1: TEdit;
    E15_2: TEdit;
    E15_3: TEdit;
    E15_4: TEdit;
    E15_5: TEdit;
    Panel12: TPanel;
    E11_6: TEdit;
    E11_7: TEdit;
    E11_8: TEdit;
    E11_9: TEdit;
    E11_10: TEdit;
    E12_6: TEdit;
    E12_7: TEdit;
    E12_8: TEdit;
    E12_9: TEdit;
    E12_10: TEdit;
    E13_6: TEdit;
    E13_7: TEdit;
    E13_8: TEdit;
    E13_9: TEdit;
    E13_10: TEdit;
    E14_6: TEdit;
    E14_7: TEdit;
    E14_8: TEdit;
    E14_9: TEdit;
    E14_10: TEdit;
    E15_6: TEdit;
    E15_7: TEdit;
    E15_8: TEdit;
    E15_9: TEdit;
    E15_10: TEdit;
    Panel13: TPanel;
    E11_11: TEdit;
    E11_12: TEdit;
    E11_13: TEdit;
    E11_14: TEdit;
    E11_15: TEdit;
    E12_11: TEdit;
    E12_12: TEdit;
    E12_13: TEdit;
    E12_14: TEdit;
    E12_15: TEdit;
    E13_11: TEdit;
    E13_12: TEdit;
    E13_13: TEdit;
    E13_14: TEdit;
    E13_15: TEdit;
    E14_11: TEdit;
    E14_12: TEdit;
    E14_13: TEdit;
    E14_14: TEdit;
    E14_15: TEdit;
    E15_11: TEdit;
    E15_12: TEdit;
    E15_13: TEdit;
    E15_14: TEdit;
    E15_15: TEdit;
    Panel14: TPanel;
    E11_16: TEdit;
    E11_17: TEdit;
    E11_18: TEdit;
    E11_19: TEdit;
    E11_20: TEdit;
    E12_16: TEdit;
    E12_17: TEdit;
    E12_18: TEdit;
    E12_19: TEdit;
    E12_20: TEdit;
    E13_16: TEdit;
    E13_17: TEdit;
    E13_18: TEdit;
    E13_19: TEdit;
    E13_20: TEdit;
    E14_16: TEdit;
    E14_17: TEdit;
    E14_18: TEdit;
    E14_19: TEdit;
    E14_20: TEdit;
    E15_16: TEdit;
    E15_17: TEdit;
    E15_18: TEdit;
    E15_19: TEdit;
    E15_20: TEdit;
    Panel15: TPanel;
    E11_21: TEdit;
    E11_22: TEdit;
    E11_23: TEdit;
    E11_24: TEdit;
    E11_25: TEdit;
    E12_21: TEdit;
    E12_22: TEdit;
    E12_23: TEdit;
    E12_24: TEdit;
    E12_25: TEdit;
    E13_21: TEdit;
    E13_22: TEdit;
    E13_23: TEdit;
    E13_24: TEdit;
    E13_25: TEdit;
    E14_21: TEdit;
    E14_22: TEdit;
    E14_23: TEdit;
    E14_24: TEdit;
    E14_25: TEdit;
    E15_21: TEdit;
    E15_22: TEdit;
    E15_23: TEdit;
    E15_24: TEdit;
    E15_25: TEdit;
    Panel16: TPanel;
    E16_1: TEdit;
    E16_2: TEdit;
    E16_3: TEdit;
    E16_4: TEdit;
    E16_5: TEdit;
    E17_1: TEdit;
    E17_2: TEdit;
    E17_3: TEdit;
    E17_4: TEdit;
    E17_5: TEdit;
    E18_1: TEdit;
    E18_2: TEdit;
    E18_3: TEdit;
    E18_4: TEdit;
    E18_5: TEdit;
    E19_1: TEdit;
    E19_2: TEdit;
    E19_3: TEdit;
    E19_4: TEdit;
    E19_5: TEdit;
    E20_1: TEdit;
    E20_2: TEdit;
    E20_3: TEdit;
    E20_4: TEdit;
    E20_5: TEdit;
    Panel17: TPanel;
    E16_6: TEdit;
    E16_7: TEdit;
    E16_8: TEdit;
    E16_9: TEdit;
    E16_10: TEdit;
    E17_6: TEdit;
    E17_7: TEdit;
    E17_8: TEdit;
    E17_9: TEdit;
    E17_10: TEdit;
    E18_6: TEdit;
    E18_7: TEdit;
    E18_8: TEdit;
    E18_9: TEdit;
    E18_10: TEdit;
    E19_6: TEdit;
    E19_7: TEdit;
    E19_8: TEdit;
    E19_9: TEdit;
    E19_10: TEdit;
    E20_6: TEdit;
    E20_7: TEdit;
    E20_8: TEdit;
    E20_9: TEdit;
    E20_10: TEdit;
    Panel18: TPanel;
    E16_11: TEdit;
    E16_12: TEdit;
    E16_13: TEdit;
    E16_14: TEdit;
    E16_15: TEdit;
    E17_11: TEdit;
    E17_12: TEdit;
    E17_13: TEdit;
    E17_14: TEdit;
    E17_15: TEdit;
    E18_11: TEdit;
    E18_12: TEdit;
    E18_13: TEdit;
    E18_14: TEdit;
    E18_15: TEdit;
    E19_11: TEdit;
    E19_12: TEdit;
    E19_13: TEdit;
    E19_14: TEdit;
    E19_15: TEdit;
    E20_11: TEdit;
    E20_12: TEdit;
    E20_13: TEdit;
    E20_14: TEdit;
    E20_15: TEdit;
    Panel19: TPanel;
    E16_16: TEdit;
    E16_17: TEdit;
    E16_18: TEdit;
    E16_19: TEdit;
    E16_20: TEdit;
    E17_16: TEdit;
    E17_17: TEdit;
    E17_18: TEdit;
    E17_19: TEdit;
    E17_20: TEdit;
    E18_16: TEdit;
    E18_17: TEdit;
    E18_18: TEdit;
    E18_19: TEdit;
    E18_20: TEdit;
    E19_16: TEdit;
    E19_17: TEdit;
    E19_18: TEdit;
    E19_19: TEdit;
    E19_20: TEdit;
    E20_16: TEdit;
    E20_17: TEdit;
    E20_18: TEdit;
    E20_19: TEdit;
    E20_20: TEdit;
    Panel20: TPanel;
    E16_21: TEdit;
    E16_22: TEdit;
    E16_23: TEdit;
    E16_24: TEdit;
    E16_25: TEdit;
    E17_21: TEdit;
    E17_22: TEdit;
    E17_23: TEdit;
    E17_24: TEdit;
    E17_25: TEdit;
    E18_21: TEdit;
    E18_22: TEdit;
    E18_23: TEdit;
    E18_24: TEdit;
    E18_25: TEdit;
    E19_21: TEdit;
    E19_22: TEdit;
    E19_23: TEdit;
    E19_24: TEdit;
    E19_25: TEdit;
    E20_21: TEdit;
    E20_22: TEdit;
    E20_23: TEdit;
    E20_24: TEdit;
    E20_25: TEdit;
    Panel21: TPanel;
    E21_1: TEdit;
    E21_2: TEdit;
    E21_3: TEdit;
    E21_4: TEdit;
    E21_5: TEdit;
    E22_1: TEdit;
    E22_2: TEdit;
    E22_3: TEdit;
    E22_4: TEdit;
    E22_5: TEdit;
    E23_1: TEdit;
    E23_2: TEdit;
    E23_3: TEdit;
    E23_4: TEdit;
    E23_5: TEdit;
    E24_1: TEdit;
    E24_2: TEdit;
    E24_3: TEdit;
    E24_4: TEdit;
    E24_5: TEdit;
    E25_1: TEdit;
    E25_2: TEdit;
    E25_3: TEdit;
    E25_4: TEdit;
    E25_5: TEdit;
    Panel22: TPanel;
    E21_6: TEdit;
    E21_7: TEdit;
    E21_8: TEdit;
    E21_9: TEdit;
    E21_10: TEdit;
    E22_6: TEdit;
    E22_7: TEdit;
    E22_8: TEdit;
    E22_9: TEdit;
    E22_10: TEdit;
    E23_6: TEdit;
    E23_7: TEdit;
    E23_8: TEdit;
    E23_9: TEdit;
    E23_10: TEdit;
    E24_6: TEdit;
    E24_7: TEdit;
    E24_8: TEdit;
    E24_9: TEdit;
    E24_10: TEdit;
    E25_6: TEdit;
    E25_7: TEdit;
    E25_8: TEdit;
    E25_9: TEdit;
    E25_10: TEdit;
    Panel23: TPanel;
    E21_11: TEdit;
    E21_12: TEdit;
    E21_13: TEdit;
    E21_14: TEdit;
    E21_15: TEdit;
    E22_11: TEdit;
    E22_12: TEdit;
    E22_13: TEdit;
    E22_14: TEdit;
    E22_15: TEdit;
    E23_11: TEdit;
    E23_12: TEdit;
    E23_13: TEdit;
    E23_14: TEdit;
    E23_15: TEdit;
    E24_11: TEdit;
    E24_12: TEdit;
    E24_13: TEdit;
    E24_14: TEdit;
    E24_15: TEdit;
    E25_11: TEdit;
    E25_12: TEdit;
    E25_13: TEdit;
    E25_14: TEdit;
    E25_15: TEdit;
    Panel24: TPanel;
    E21_16: TEdit;
    E21_17: TEdit;
    E21_18: TEdit;
    E21_19: TEdit;
    E21_20: TEdit;
    E22_16: TEdit;
    E22_17: TEdit;
    E22_18: TEdit;
    E22_19: TEdit;
    E22_20: TEdit;
    E23_16: TEdit;
    E23_17: TEdit;
    E23_18: TEdit;
    E23_19: TEdit;
    E23_20: TEdit;
    E24_16: TEdit;
    E24_17: TEdit;
    E24_18: TEdit;
    E24_19: TEdit;
    E24_20: TEdit;
    E25_16: TEdit;
    E25_17: TEdit;
    E25_18: TEdit;
    E25_19: TEdit;
    E25_20: TEdit;
    Panel25: TPanel;
    E21_21: TEdit;
    E21_22: TEdit;
    E21_23: TEdit;
    E21_24: TEdit;
    E21_25: TEdit;
    E22_21: TEdit;
    E22_22: TEdit;
    E22_23: TEdit;
    E22_24: TEdit;
    E22_25: TEdit;
    E23_21: TEdit;
    E23_22: TEdit;
    E23_23: TEdit;
    E23_24: TEdit;
    E23_25: TEdit;
    E24_21: TEdit;
    E24_22: TEdit;
    E24_23: TEdit;
    E24_24: TEdit;
    E24_25: TEdit;
    E25_21: TEdit;
    E25_22: TEdit;
    E25_23: TEdit;
    E25_24: TEdit;
    E25_25: TEdit;
    procedure E1_1KeyUp(Sender: TObject; var Key: Word;
      Shift: TShiftState);
    procedure Button1Click(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
    procedure ComboBox1Change(Sender: TObject);
    procedure Button4Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
    procedure Button3Click(Sender: TObject);
    procedure Button5Click(Sender: TObject);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure FormCloseQuery(Sender: TObject; var CanClose: Boolean);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form5: TForm5;

implementation

{$R *.dfm}
var
  Data:array[1..25,1..25]of string[1]; //Начальное поле данных
  Map:array[1..25,1..25]of string[1]; //Карта поля
  TimeGame:integer; //Время игры - для результата.
  DataToSave:array[1..25,1..25]of String[1]; //Поле для записи
  S:string[1];
  R:Integer; //Сообщения
  Level:byte;

procedure TForm5.E1_1KeyUp(Sender: TObject; var Key: Word;
  Shift: TShiftState);
Var ch:char;
    little:string[25];
    big:string[25];
    i:byte;
begin
if TEdit(Sender).Text='' then TEdit(Sender).Text:=' ';
ch:=TEdit(Sender).Text[1];
little:='abcdefghijklmnopqrstuvwxy';
big:='ABCDEFGHIJKLMNOPQRSTUVWXY';
for i:=1 to 25 do
  if ch=little[i] then TEdit(Sender).Text:=big[i];
if not(TEdit(Sender).Text[1] in ['A'..'Y']) then  TEdit(Sender).Text:='';
end;

Procedure Example;  //Заполнение начального поля данных
var i,j,k:integer;
    big:string[25];
    c:byte;
Begin
big:='ABCDEFGHIJKLMNOPQRSTUVWXY';
for i:=1 to 25 do
  for j:=1 to 25 do
    Begin
    Case (i) of
      1: k:=0;
      2: k:=5;
      3: k:=10;
      4: k:=15;
      5: k:=20;
      6: k:=1;
      7: k:=6;
      8: k:=11;
      9: k:=16;
      10: k:=21;
      11: k:=2;
      12: k:=7;
      13: k:=12;
      14: k:=17;
      15: k:=22;
      16: k:=3;
      17: k:=8;
      18: k:=13;
      19: k:=18;
      20: k:=23;
      21: k:=4;
      22: k:=9;
      23: k:=14;
      24: k:=19;
      25: k:=24;
      End;
    if (j+k)>25 then c:=(j+k)-25
      else c:=j+k;
    Data[i,j]:=big[c];
    End;
End;

Procedure Mapping;
Var
  i,j,x,y,xx,yy,xy,yx,k:byte;
  z,x1,x2:string[1];
  big:string[25];
Begin
  Randomize;
  big:='ABCDEFGHIJKLMNOPQRSTUVWXY';

  //Транспонирование матрицы поля
  x:=random(8)+1;
  for i:=1 to 25 do
    for j:=1 to 25 do
    Case x of
      1 : Map[26-j,i]:=Data[i,j];
      2 : Map[26-i,26-j]:=Data[i,j];
      3 : Map[j,26-i]:=Data[i,j];
      4 : Map[i,j]:=Data[i,j];
      5 : Map[j,i]:=Data[i,j];
      6 : Map[26-i,j]:=Data[i,j];
      7 : Map[26-j,26-i]:=Data[i,j];
      8 : Map[i,26-j]:=Data[i,j];
    end;

  //Перетасовка строк
  for i:=1 to 5 do
    begin
    x:=random(5);
    y:=random(5);
    xx:=random(5);
    yy:=random(5);
    xy:=random(5);
    yx:=random(5);
    for j:=1 to 25 do
      begin
      z:=Map[i*5-x,j];
      Map[i*5-x,j]:=Map[i*5-y,j];
      Map[i*5-y,j]:=z;

      z:=Map[i*5-xx,j];
      Map[i*5-xx,j]:=Map[i*5-yy,j];
      Map[i*5-yy,j]:=z;

      z:=Map[i*5-xy,j];
      Map[i*5-xy,j]:=Map[i*5-yx,j];
      Map[i*5-yx,j]:=z;
      end;
    end;

  //Перетасовка столбцов
  for i:=1 to 5 do
    begin
    x:=random(5);
    y:=random(5);
    xx:=random(5);
    yy:=random(5);
    xy:=random(5);
    yx:=random(5);
    for j:=1 to 25 do
      begin
      z:=Map[j,i*5-x];
      Map[j,i*5-x]:=Map[j,i*5-y];
      Map[j,i*5-y]:=z;

      z:=Map[j,i*5-xx];
      Map[j,i*5-xx]:=Map[j,i*5-yy];
      Map[j,i*5-yy]:=z;

      z:=Map[j,i*5-xy];
      Map[j,i*5-xy]:=Map[j,i*5-yx];
      Map[j,i*5-yx]:=z;
      end;
    end;

  //Перетасовка областей-строк
  x:=random(5)+1;
  y:=random(5)+1;
  xx:=random(5)+1;
  yy:=random(5)+1;
  xy:=random(5)+1;
  yx:=random(5)+1;
  for i:=0 to 4 do
    for j:=1 to 25 do
    begin
    z:=Map[5*x-i,j];
    Map[5*x-i,j]:=Map[5*y-i,j];
    Map[5*y-i,j]:=z;

    z:=Map[5*xx-i,j];
    Map[5*xx-i,j]:=Map[5*yy-i,j];
    Map[5*yy-i,j]:=z;

    z:=Map[5*xy-i,j];
    Map[5*xy-i,j]:=Map[5*yx-i,j];
    Map[5*yx-i,j]:=z;
    end;

  //Перетасовка областей-столбцов
  x:=random(5)+1;
  y:=random(5)+1;
  xx:=random(5)+1;
  yy:=random(5)+1;
  xy:=random(5)+1;
  yx:=random(5)+1;
  for i:=0 to 4 do
    for j:=1 to 25 do
    begin
    z:=Map[j,5*x-i];
    Map[j,5*x-i]:=Map[j,5*y-i];
    Map[j,5*y-i]:=z;

    z:=Map[j,5*xx-i];
    Map[j,5*xx-i]:=Map[j,5*yy-i];
    Map[j,5*yy-i]:=z;

    z:=Map[j,5*xy-i];
    Map[j,5*xy-i]:=Map[j,5*yx-i];
    Map[j,5*yx-i]:=z;
    end;

  //Равносильная замена
  for k:=1 to 13 do
  begin
    x:=random(25)+1;
    y:=random(25)+1;
    x1:=big[x];
    x2:=big[x];

    for i:=1 to 25 do
      for j:=1 to 25 do
      begin
      if map[i,j]=x1 then map[i,j]:=x2
        else if map[i,j]=x2 then map[i,j]:=x1;
      end;
  end;
end;

Procedure Clearing;
var i,j:byte;
Begin
For i:=1 to 25 do
	For j:=1 to 25 do
		With S25.Form5 do
    TEdit(FindComponent('E'+inttostr(i)+'_'+inttostr(j))).Enabled := True;
End;

Procedure ClearMap;
var i,j:byte;
Begin
For i:=1 to 25 do
	For j:=1 to 25 do
    With S25.Form5 do
		if TEdit(FindComponent('E'+inttostr(i)+'_'+inttostr(j))).Text<>'' then
      TEdit(FindComponent('E'+inttostr(i)+'_'+inttostr(j))).Enabled:=false;
End;

Procedure CreateMap;
Var
  i,j,l,e:integer;
Begin
  Randomize;
  l:=S25.Form5.ComboBox1.ItemIndex;
  Case l of
    0: e:=244;
    1: e:=305;
    2: e:=344;
    3: e:=385;
    4: e:=439;
  end;

  l:=0;
  repeat
  i:=random(25)+1;
  j:=random(25)+1;
  if map[i,j]<>'' then
  begin
    map[i,j]:='';
    map[26-i,26-j]:='';
    if (26-i=i)and(26-j=j) then inc(l)
      else l:=l+2;
  end;
  until (l>e);
End;

Procedure DataToMap;
var i,j:byte;
Begin
For i:=1 to 25 do
	For j:=1 to 25 do
    With S25.Form5 do
		TEdit(FindComponent('E'+inttostr(i)+'_'+inttostr(j))).Text:=DataToSave[i,j];
End;

Procedure MapToData;
var i,j:byte;
Begin
For i:=1 to 25 do
	For j:=1 to 25 do
    With S25.Form5 do
		DataToSave[i,j]:=TEdit(FindComponent('E'+inttostr(i)+'_'+inttostr(j))).Text;
End;

Procedure FullClear;
var i,j:byte;
Begin
For i:=1 to 25 do
	For j:=1 to 25 do
    With S25.Form5 do
		TEdit(FindComponent('E'+inttostr(i)+'_'+inttostr(j))).Text:='';
End;

Procedure ShowMap;
var i,j:byte;
Begin
For i:=1 to 25 do
	For j:=1 to 25 do
    With S25.Form5 do
		TEdit(FindComponent('E'+inttostr(i)+'_'+inttostr(j))).Text:=Map[i,j];
End;

procedure TForm5.Button1Click(Sender: TObject);
begin
Timer1.Enabled:=False;
r:=MessageDLG('Начало новой игры удалит текущую игру. Вы уверены, что хотите начать новую?',
  mtWarning,[mbYes,mbNo],0);
if r=mrYes then
Begin
  Clearing;
  Example;
  Mapping;
  CreateMap;
  ShowMap;
  ClearMap;
  TimeGame:=0;
End;
Timer1.Enabled:=True;
end;

procedure TForm5.Timer1Timer(Sender: TObject);
begin
inc(TimeGame);
Label1.Caption:=inttostr(TimeGame);
end;

procedure TForm5.ComboBox1Change(Sender: TObject);
begin
Timer1.Enabled:=False;
r:=MessageDLG('Начало новой игры удалит текущую игру. Вы уверены, что хотите начать новую?',
  mtWarning,[mbYes,mbNo],0);
if r=mrYes then
Begin
  Clearing;
  Example;
  Mapping;
  CreateMap;
  ShowMap;
  ClearMap;
  TimeGame:=0;
  Level:=Combobox1.ItemIndex;
End;
Combobox1.ItemIndex:=Level;
Timer1.Enabled:=True;
end;

procedure TForm5.Button4Click(Sender: TObject);
begin
Close;
end;

procedure TForm5.Button2Click(Sender: TObject);
Var
  F:TextFile;
  i,j:byte;
  str:string[4];
  Name:String;
begin
Timer1.Enabled:=false;
if SaveDialog1.Execute then
begin
MapToData;
str:='';
Name:=SaveDialog1.FileName;
for i:=length(Name)-3 to length(Name) do
  str:=str+Name[i];
if str<>'.ssd' then AssignFile(F,SaveDialog1.FileName+'.ssd')
  else AssignFile(F,SaveDialog1.FileName);
Rewrite(F);
for i:=1 to 25 do
  Begin
  For j:=1 to 25 do
    Begin
    if DataToSave[i,j]='' then DataToSave[i,j]:='0';
    Writeln(F,DataToSave[i,j]);
    End;
  End;
for i:=1 to 25 do
  Begin
  For j:=1 to 25 do
    Begin
    Writeln(F,Map[i,j]);
    End;
  End;
Writeln(F,comboBox1.ItemIndex);
Writeln(F,TimeGame);
CloseFile(F)
end;
Timer1.Enabled:=True;
end;

procedure TForm5.Button3Click(Sender: TObject);
Var
  F:TextFile;
  i,j,k:byte;
begin
Timer1.Enabled:=false;
if OpenDialog1.Execute then
begin
AssignFile(F,OpenDialog1.FileName);
Reset(F);
for i:=1 to 25 do
  Begin
  For j:=1 to 25 do
    Begin
    Readln(F,DataToSave[i,j]);
    if DataToSave[i,j]='0' then DataToSave[i,j]:='';
    End;
  End;
for i:=1 to 25 do
  Begin
  For j:=1 to 25 do
    Begin
    Readln(F,Map[i,j]);
    End;
  End;
Readln(F,k);
ComboBox1.ItemIndex:=k;
Readln(F,TimeGame);
CloseFile(F);

Clearing;
ShowMap;
ClearMap;
DataToMap;
end;
Timer1.Enabled:=true;
end;

procedure TForm5.Button5Click(Sender: TObject);
Var
  Err:boolean;
  i,j,k,x,y,z,c:byte;
  M:array[1..25] of string[1];
  F:TextFile;
  Rec:integer;
  pos:longint;
begin
Timer1.Enabled:=false;
MapToData;
Err:=false;

for i:=1 to 25 do
  for j:=1 to 25 do
  if DataToSave[i,j]='' then err:=true;

for i:=1 to 25 do
  for j:=1 to 24 do
    for k:=j+1 to 25 do
    if DataToSave[i,j]=DataToSave[i,k] then err:=true;

for i:=1 to 25 do
  for j:=1 to 24 do
    for k:=j+1 to 25 do
    if DataToSave[j,i]=DataToSave[k,i] then err:=true;

for x:=0 to 4 do
  for y:=0 to 4 do
  begin
  k:=0;
  for i:=x*5+1 to (x+1)*5 do
    for j:=y*5+1 to (y+1)*5 do
      begin
      k:=k+1;
      M[k]:=DataToSave[i,j];
      end;

  for z:=1 to 24 do
    for c:=z+1 to 25 do
      if m[z]=m[c] then err:=true;
  end;

if err=true then
  begin
  showmessage('Есть ошибки');
  Timer1.Enabled:=true;
  End
Else
  Begin
  ShowMessage('Решено верно');
  AssignFile(F,ExtractFilePath(Application.exename )+'/Rec_G.srf');
  Reset(F);
  For i:=1 to 10 do Readln(F,Rec);
  for i:=0 to ComboBox1.ItemIndex do
      Readln(F,Rec);
  CloseFile(F);
  if TimeGame<Rec then
    Begin
    ShowMessage('Вы решили быстрее всех');
    ListBox1.Items.LoadFromFile(ExtractFilePath(Application.exename )+'/Rec_G.srf');
    ListBox1.Items.Strings[ComboBox1.ItemIndex]:=inttostr(TimeGame);
    ListBox1.Items.SaveToFile(ExtractFilePath(Application.exename )+'/Rec_G.srf');
    End;

  Begin
  AssignFile(F,ExtractFilePath(Application.exename )+'/Rec_B.srf');
  Reset(F);
  For i:=1 to 10 do Readln(F,Rec);
  for i:=0 to ComboBox1.ItemIndex do
      Readln(F,Rec);
  CloseFile(F);
  if TimeGame>Rec then
    Begin
    ShowMessage('Вы решили Медленнее всех');
    ListBox1.Items.LoadFromFile(ExtractFilePath(Application.exename )+'/Rec_B.srf');
    ListBox1.Items.Strings[ComboBox1.ItemIndex]:=inttostr(TimeGame);
    ListBox1.Items.SaveToFile(ExtractFilePath(Application.exename )+'/Rec_B.srf');
    End;
    End;
  End;
end;

procedure TForm5.FormClose(Sender: TObject; var Action: TCloseAction);
begin
FullClear;
end;

procedure TForm5.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
begin
Timer1.Enabled:=false;
CanClose:=false;
r:=MessageDLG('Вы уверены, что хотите выйти?',mtWarning,[mbYes,mbNo],0);
if r=mrYes then CanClose:=true
else timer1.Enabled:=true;
end;

end.
